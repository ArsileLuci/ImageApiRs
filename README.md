# ImageApiRs

Установить `pkg-config` и одну из бибилиотек для SSL: `libssl-dev для Ubuntu` или `openssl-devel для Fedora`
Установить `rustc, cargo`

Для сборки:
`cargo build`

Для запуска тестов:
`cargo test`

Для запуска сервера:
`cargo run`

Сервер работает на адресе 127.0.0.1:8080

# Доступные методы:

## /image/{id} GET
возвращает поток байтов соответствующих изображению

## /preview/{id} GET
возвращает поток байтов соответствующих превью изображения, размером 100 на 100 пикселей
изображение сжимается(растягивается) до необходимого размера с сохранением пропорций после чего обрезается до необходимого размера

## /addbase64 POST

### Body Example: 
`{"Image":"<base64 image representation>"}`
заголовок base64 не имеет значения, проверка на изображение проверяется по метадате файла
### Response Example:
`{"Id":"0000-0000-0000-0000"}`
где `Id` это идентификатор изображения в базе
### Erors:
BadRequest: переданная строка не в формате base64,
            формат изображения не поддерживает

## /addurl POST

### Body Example: 
`{"Url":"<url адрес ресурса>"}`
### Response Example:
`{"Id":"0000-0000-0000-0000"}`
где `Id` это идентификатор изображения в базе
### Erors:
BadRequest: не возможно получить данные по заданному Url,
            формат изображения не поддерживает

## /addmultipart POST

### Body Example: 
<Multipart Body with one or multipple files>

### Response Example:
`["0000-0000-0000-0000", null]`
где каждому изоображению в теле запроса соответствует свой Id, null будет возвращён если изображение было в неверном формате

